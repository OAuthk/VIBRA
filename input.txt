Antigravity用プロンプト：フロントエンドの最終実装
タスク名:
Finalize Frontend Implementation for VIBRA
タスク説明 (Instructions):
You are a Senior Frontend Developer, specializing in D3.js and creating beautiful, interactive data visualizations.
Your mission is to complete the frontend for the "VIBRA" project. The backend is already complete and provides a trends.json file. You must now build the final user interface by merging the best ideas from two previous prototypes: the dynamic physics simulation from keyword_constellation.html and the clean, white-themed UI components from vibra-living-cloud.html.
Please generate a detailed implementation_plan.md first, then proceed to create/overwrite the following three files: templates/layout.html, static/css/style.css, and static/js/main.js.
技術仕様 (Technical Specifications)
Part 1: templates/layout.html (The Skeleton)
Objective:
Create the final HTML structure based on the clean layout of vibra-living-cloud.html, but adapt it for the physics-based constellation view.
Implementation Details:
Use the vibra-living-cloud.html structure: a <header>, <nav>, <main>, and <footer>.
Inside the <main> tag, implement the structure from keyword_constellation.html:
An <svg id="connection-lines"> element for drawing the connection lines.
A <div id="keywords-container"> element where the keyword <div>s will be dynamically added.
Include placeholders for dynamic content that will be populated by JavaScript (e.g., <div class="time-display"></div>, <span id="copyright-year"></span>).
Ensure all necessary scripts (d3.v7.min.js, main.js) and stylesheets (style.css) are linked correctly.
Part 2: static/css/style.css (The Look & Feel)
Objective:
Merge the aesthetic styles from both prototypes to create the final look.
Implementation Details:
Base Style: Use the clean, professional, white-themed styles from vibra-living-cloud.html for the body, header, nav (tabs), and footer.
Constellation Styles: From keyword_constellation.html, port over and adapt the following styles to the white theme:
.connection-line: The style for the faint, dashed lines. Adjust the color to a light gray suitable for a white background (e.g., #E0E0E0).
@keyframes pulse-glow: The animation for the connection lines.
.keyword: The style for the keyword containers. Crucially, instead of multiple *-group classes with hardcoded colors, you will create a generic .keyword style. The text color will be set dynamically by the JavaScript based on the cluster_id.
@keyframes float: The subtle floating animation for each keyword.
Part 3: static/js/main.js (The Brain & Soul)
Objective:
This is the most critical part. Combine the data-fetching logic with the superior physics-based layout and interaction logic from keyword_constellation.html.
Implementation Steps:
Data Fetching:
Start with an async function initializeApp() that is called on DOMContentLoaded.
Inside this function, fetch('trends.json') to get the live trend data. Handle loading and error states gracefully.
Data Preparation:
The fetched JSON will contain a list of trend objects, each with a cluster_id.
You need to transform this flat list into a data structure that the constellation logic can use, for example, grouping keywords by their cluster_id.
Layout Algorithm (Port from keyword_constellation.html):
Use the custom physics-based placement logic (positionKeywords, isOverlapping). Do not use d3.forceSimulation. The custom logic was smoother and more controllable.
Position all keywords randomly, ensuring no overlaps.
Rendering (Port and Adapt):
Keywords (createKeywords): Dynamically create <div> elements for each keyword.
Coloring: Use a d3.scaleOrdinal(d3.schemeCategory10) to create a color scale. Assign the text color of each keyword based on its cluster_id using this scale.
Connections (drawConnections): Dynamically create SVG <line> elements.
Logic: Draw lines only between keywords that share the same cluster_id.
Styling: Apply the .connection-line class to these lines.
Interactivity (Port and Enhance):
Implement the hover effect from keyword_constellation.html: when a user hovers over a keyword, all other keywords in the same cluster and their connecting lines should be highlighted. Other clusters should fade out slightly.
Component Logic:
Integrate the tab switching logic (initTabs) from vibra-living-cloud.html. When a tab is clicked, the visualization should smoothly update to show only the keywords belonging to that genre/category.
Final Instruction:
Your implementation must result in a single, cohesive frontend that embodies the best of both prototypes: the elegant, white-themed UI framework, and the fluid, interactive, physics-based constellation visualization. Please generate the implementation_plan.md first.





